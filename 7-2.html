<!DOCTYPE html>
<meta charset="UTF-8">
<script>
	// 親コンストラクタ
	function CarMaker(){}

	// 親メソッド
	CarMaker.prototype.drive = function(){
		return 'Vroom, I have ' + this.doors + ' droors';
	};

	// ファクトリメソッド
	CarMaker.factory = function(type){
		var constr = type,
			newcar;
		
		// コンストラクタが存在しなければエラー
		if(typeof CarMaker[constr] !== 'function'){
			throw {
				name: 'Error',
				message: constr + " don't exist"
			};
		}

		// 親から継承する
		if(typeof CarMaker[constr].prototype.drive !== 'function'){
			CarMaker[constr].prototype = new CarMaker();
		}

		newcar = new CarMaker[constr]();
		return newcar;
	};

	CarMaker.Compact = function(){
		this.doors = 4;
	};
	CarMaker.Convertible = function(){
		this.doors = 2;
	};
	CarMaker.SUV= function(){
		this.doors = 17;
		// 個別でメソッドを定義する
		this.kind = function(){
			// 定義は適当
			if(this.doors >= 5){
				return '5 doors';
			}else{
				return '3 doors';
			}
		};
	};
	var corolla = CarMaker.factory('Compact');
	var solstice = CarMaker.factory('Convertible');
	var cherokee = CarMaker.factory('SUV');
	console.log(corolla.drive());
	console.log(solstice.drive());
	console.log(cherokee.drive());
	console.log(cherokee.kind());

</script>
